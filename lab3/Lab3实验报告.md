#Lab3实验报告
计23班 杨煜 2011010312

##练习0:填写已有实验
填写了Lab1和Lab2中已经完成了的代码。

##练习1:给未被映射的地址映射上物理页
###设计实现过程
调用函数get_pte可以依据地址查找相应页表项，若二级页表不存在则给它分配一页。在映射不存在时可以调用pgdir\_alloc\_page分配一个物理页并将其和对应的逻辑地址建立联系。

###请描述PDE和PTE中组成部分对ucore实现页替换算法的潜在用处
PDE和PTE的前20位表示的地址是用来寻找页表的，在后面的各个功能位中，PTE\_W（可读写）和PTE\_U（用户态）在操作系统记录缺页异常信息时使用，PTE_D(Dirty块)可以用来实现改进后的时钟算法。

###如果ucore的缺页服务例程在执行过程中访问内存，出现了页访问异常，请问硬件要做哪些事情？
向栈中保存现场，然后调用缺页异常处理程序；ucore没有设计处理这种在缺页服务例程执行过程中再执行缺页服务例程，所以有可能崩溃


##练习2：补充完成基于FIFO的页面替换算法

###设计实现过程
修改do\_pgfault函数，在页表项非空时，换入页面并连接页面；然后在\_fifo\_map\_swappable中，可以将最近访问的页放入队列的头部；最后在\_fifo\_swap\_out\_victim中弹出队列尾的页面。

###与标准答案的区别
标准答案中队列顺序不是很直观，在我的实现中改成了每遇到新的页面可以加入到队尾，然后在弹出时候选择队头的页面弹出。

###如果要在ucore上实现"extended clock页替换算法"请给你的设计方案


##总结：
本次Lab对应的知识点为：

- 页和页表分配   －－练习一
- 虚存的概念     －－练习一
- 缺页异常处理流程 －－练习一
- FIFo页面置换算法 －－练习二

实验未涉及到的知识点:

- FIFO外其余局部页面置换算法
- 全局页面置换算法